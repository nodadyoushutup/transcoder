# Global development configuration for the transcoder microservices stack.
# All launch scripts source this file (via load-dotenv.sh) so every service
# shares the same credentials, ports, and cross-service endpoints.

# ---------- Authentication ----------
TRANSCODER_ADMIN_USERNAME=admin
TRANSCODER_ADMIN_PASSWORD=password
TRANSCODER_ADMIN_EMAIL=admin@example.com
TRANSCODER_SECRET_KEY=dev-change-me

# ---------- Service Endpoints ----------
# External URLs that other services and the GUI use to communicate.
TRANSCODER_API_URL=http://192.168.1.150:5001
TRANSCODER_SERVICE_URL=http://192.168.1.150:5003
TRANSCODER_INGEST_URL=http://192.168.1.150:5005
TRANSCODER_LOCAL_MEDIA_BASE_URL=http://192.168.1.150:5005/media/
TRANSCODER_PUBLISH_BASE_URL=

# GUI expects these to be exported at runtime so Vite exposes them to the app.
VITE_BACKEND_URL=http://192.168.1.150:5001
VITE_INGEST_URL=http://192.168.1.150:5005
VITE_STREAM_URL=http://192.168.1.150:5005/media/audio_video.mpd

# ---------- Bind Addresses ----------
# Individual services default to these bindings when started via run scripts.
TRANSCODER_API_HOST=0.0.0.0
TRANSCODER_API_PORT=5001
TRANSCODER_TRANSCODER_HOST=0.0.0.0
TRANSCODER_TRANSCODER_PORT=5003
TRANSCODER_INGEST_HOST=0.0.0.0
TRANSCODER_INGEST_PORT=5005
TRANSCODER_GUI_HOST=0.0.0.0
TRANSCODER_GUI_PORT=5173

# ---------- Gunicorn / Hypercorn ----------
# Service-specific tuning â€“ scripts fall back to these before generic
# GUNICORN_* overrides.
API_GUNICORN_WORKER_CLASS=eventlet
API_GUNICORN_WORKERS=2
API_GUNICORN_THREADS=
API_GUNICORN_WORKER_CONNECTIONS=

TRANSCODER_GUNICORN_WORKER_CLASS=sync
TRANSCODER_GUNICORN_WORKERS=1

INGEST_GUNICORN_WORKER_CLASS=eventlet
INGEST_GUNICORN_WORKERS=2
INGEST_GUNICORN_THREADS=8
INGEST_GUNICORN_WORKER_CONNECTIONS=

# ---------- Celery ----------
CELERY_BROKER_URL=redis://192.168.1.100:9379/0
CELERY_RESULT_BACKEND=redis://192.168.1.100:9379/0
CELERY_LOG_LEVEL=info
CELERY_WORKER_QUEUE=transcoder,library_sections,library_images
CELERY_LIBRARY_QUEUE=library_sections
CELERY_IMAGE_CACHE_QUEUE=library_images
CELERY_WORKER_CONCURRENCY=4

# ---------- Feature Flags / Misc ----------
ENABLE_EMBEDDED_CELERY=1
TRANSCODER_HTTP2_ENABLED=0
