@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: dark;
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    line-height: 1.5;
    font-weight: 400;

    --color-background: 15 15 15;
    --color-surface: 24 24 27;
    --color-surface-muted: 39 39 42;
    --color-border: 63 63 70;
    --color-outline: 161 161 170;
    --color-overlay: 9 9 11;
    --color-foreground: 244 244 245;
    --color-muted-foreground: 161 161 170;
    --color-subtle-foreground: 113 113 122;
    --color-accent: 232 196 139;
    --color-accent-foreground: 56 40 12;
    --color-success: 152 224 173;
    --color-success-foreground: 30 82 59;
    --color-warning: 250 210 135;
    --color-warning-foreground: 97 54 11;
    --color-danger: 242 169 182;
    --color-danger-foreground: 99 36 52;
    --color-info: 166 210 250;
    --color-info-foreground: 32 64 92;
    --color-ring: 232 196 139;
    --color-scrollbar-track: 24 24 27;
    --color-scrollbar-thumb: 63 63 70;
    --group-color-admin: 232 196 139;
    --group-color-admin-foreground: 56 40 12;
    --group-color-moderator: 118 169 250;
    --group-color-moderator-foreground: 18 32 56;
    --group-color-user: 152 224 173;
    --group-color-user-foreground: 25 54 32;
    --group-color-guest: 160 174 192;
    --group-color-guest-foreground: 23 28 36;
  }

  :root[data-theme='dark'] {
    color-scheme: dark;
    --color-background: 15 15 15;
    --color-surface: 24 24 27;
    --color-surface-muted: 39 39 42;
    --color-border: 63 63 70;
    --color-outline: 161 161 170;
    --color-overlay: 9 9 11;
    --color-foreground: 244 244 245;
    --color-muted-foreground: 161 161 170;
    --color-subtle-foreground: 113 113 122;
    --color-accent: 232 196 139;
    --color-accent-foreground: 56 40 12;
    --color-success: 152 224 173;
    --color-success-foreground: 30 82 59;
    --color-warning: 250 210 135;
    --color-warning-foreground: 97 54 11;
    --color-danger: 242 169 182;
    --color-danger-foreground: 99 36 52;
    --color-info: 166 210 250;
    --color-info-foreground: 32 64 92;
    --color-ring: 232 196 139;
    --color-scrollbar-track: 24 24 27;
    --color-scrollbar-thumb: 63 63 70;
    --group-color-admin: 232 196 139;
    --group-color-admin-foreground: 56 40 12;
    --group-color-moderator: 118 169 250;
    --group-color-moderator-foreground: 18 32 56;
    --group-color-user: 152 224 173;
    --group-color-user-foreground: 25 54 32;
    --group-color-guest: 160 174 192;
    --group-color-guest-foreground: 23 28 36;
  }

  :root[data-theme='light'] {
    color-scheme: light;
    --color-background: 234 234 230;
    --color-surface: 244 244 240;
    --color-surface-muted: 224 224 218;
    --color-border: 205 202 194;
    --color-outline: 150 146 136;
    --color-overlay: 40 36 32;
    --color-foreground: 38 35 30;
    --color-muted-foreground: 102 97 88;
    --color-subtle-foreground: 128 122 113;
    --color-accent: 204 152 90;
    --color-accent-foreground: 36 24 12;
    --color-success: 110 168 124;
    --color-success-foreground: 20 54 36;
    --color-warning: 215 156 72;
    --color-warning-foreground: 60 34 8;
    --color-danger: 204 102 118;
    --color-danger-foreground: 38 16 22;
    --color-info: 108 150 196;
    --color-info-foreground: 22 36 56;
    --color-ring: 204 152 90;
    --color-scrollbar-track: 214 212 206;
    --color-scrollbar-thumb: 168 164 156;
    --group-color-admin: 204 152 90;
    --group-color-admin-foreground: 36 24 12;
    --group-color-moderator: 93 135 196;
    --group-color-moderator-foreground: 18 32 56;
    --group-color-user: 110 168 124;
    --group-color-user-foreground: 20 54 36;
    --group-color-guest: 136 146 160;
    --group-color-guest-foreground: 28 32 38;
  }

  :root[data-theme='monokai'] {
    color-scheme: dark;
    --color-background: 39 40 34;
    --color-surface: 62 61 50;
    --color-surface-muted: 75 74 63;
    --color-border: 91 90 75;
    --color-outline: 157 154 124;
    --color-overlay: 27 26 23;
    --color-foreground: 248 248 242;
    --color-muted-foreground: 166 166 148;
    --color-subtle-foreground: 144 143 118;
    --color-accent: 249 38 114;
    --color-accent-foreground: 27 24 26;
    --color-success: 166 226 46;
    --color-success-foreground: 27 33 18;
    --color-warning: 253 151 31;
    --color-warning-foreground: 43 22 3;
    --color-danger: 255 97 136;
    --color-danger-foreground: 43 16 22;
    --color-info: 102 217 239;
    --color-info-foreground: 16 39 48;
    --color-ring: 249 38 114;
    --color-scrollbar-track: 39 40 34;
    --color-scrollbar-thumb: 91 90 75;
    --group-color-admin: 249 38 114;
    --group-color-admin-foreground: 27 24 26;
    --group-color-moderator: 102 217 239;
    --group-color-moderator-foreground: 16 39 48;
    --group-color-user: 166 226 46;
    --group-color-user-foreground: 27 33 18;
    --group-color-guest: 166 171 146;
    --group-color-guest-foreground: 27 28 22;
  }

  :root[data-theme='darcula'] {
    color-scheme: dark;
    --color-background: 43 43 43;
    --color-surface: 50 50 50;
    --color-surface-muted: 60 63 65;
    --color-border: 75 77 79;
    --color-outline: 134 139 143;
    --color-overlay: 31 32 34;
    --color-foreground: 248 248 248;
    --color-muted-foreground: 175 177 179;
    --color-subtle-foreground: 144 147 150;
    --color-accent: 106 159 181;
    --color-accent-foreground: 17 24 29;
    --color-success: 141 193 73;
    --color-success-foreground: 31 43 19;
    --color-warning: 255 198 109;
    --color-warning-foreground: 61 40 10;
    --color-danger: 210 82 82;
    --color-danger-foreground: 44 17 17;
    --color-info: 104 151 187;
    --color-info-foreground: 18 35 48;
    --color-ring: 106 159 181;
    --color-scrollbar-track: 50 50 50;
    --color-scrollbar-thumb: 75 77 79;
    --group-color-admin: 210 82 82;
    --group-color-admin-foreground: 44 17 17;
    --group-color-moderator: 104 151 187;
    --group-color-moderator-foreground: 18 35 48;
    --group-color-user: 141 193 73;
    --group-color-user-foreground: 31 43 19;
    --group-color-guest: 163 170 178;
    --group-color-guest-foreground: 30 32 36;
  }

  body {
    @apply m-0 bg-background text-foreground antialiased;
  }

  code {
    @apply font-mono;
  }

  input[type='checkbox'],
  input[type='radio'] {
    accent-color: rgb(var(--color-accent) / 1);
  }

  input[type='range'] {
    accent-color: rgb(var(--color-accent) / 1);
    background: transparent;
    height: 1.5rem;
  }

  input[type='range']:focus-visible {
    outline: 2px solid rgb(var(--color-ring) / 1);
    outline-offset: 2px;
  }

  input[type='range']::-webkit-slider-runnable-track {
    background: rgb(var(--color-surface-muted) / 1);
    border-radius: 9999px;
    height: 0.4rem;
  }

  input[type='range']::-moz-range-track {
    background: rgb(var(--color-surface-muted) / 1);
    border-radius: 9999px;
    height: 0.4rem;
  }

  input[type='range']::-webkit-slider-thumb {
    appearance: none;
    background: rgb(var(--color-accent) / 1);
    border: 2px solid rgb(var(--color-background) / 1);
    border-radius: 9999px;
    height: 1rem;
    margin-top: -0.3rem;
    width: 1rem;
  }

  input[type='range']::-moz-range-thumb {
    background: rgb(var(--color-accent) / 1);
    border: 2px solid rgb(var(--color-background) / 1);
    border-radius: 9999px;
    height: 1rem;
    width: 1rem;
  }

  input[type='range']::-moz-range-progress {
    background: rgb(var(--color-accent) / 1);
    border-radius: 9999px;
  }

  input[type='range']::-ms-track {
    background: transparent;
    border-color: transparent;
    color: transparent;
  }

  input[type='range']::-ms-fill-lower {
    background: rgb(var(--color-accent) / 1);
    border-radius: 9999px;
  }

  input[type='range']::-ms-fill-upper {
    background: rgb(var(--color-surface-muted) / 1);
    border-radius: 9999px;
  }

  input[type='range']::-ms-thumb {
    background: rgb(var(--color-accent) / 1);
    border: 2px solid rgb(var(--color-background) / 1);
    border-radius: 9999px;
    height: 1rem;
    width: 1rem;
  }

  * {
    scrollbar-width: thin;
    scrollbar-color: rgb(var(--color-scrollbar-thumb)) transparent;
  }

  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background-color: rgb(var(--color-scrollbar-thumb));
    border-radius: 9999px;
    border: 2px solid transparent;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: rgb(var(--color-outline));
  }

  video::-webkit-media-controls-play-button,
  video::-webkit-media-controls-timeline,
  video::-webkit-media-controls-current-time-display,
  video::-webkit-media-controls-time-remaining-display,
  video::-webkit-media-controls-seek-back-button,
  video::-webkit-media-controls-seek-forward-button {
    display: none !important;
  }

  video::-moz-media-controls-play-button,
  video::-moz-media-controls-timeline {
    display: none !important;
  }
}

@layer components {
  .app-header {
    @apply flex items-center justify-between border-b border-border/80 bg-surface/90 px-5 py-3 md:px-8;
  }

  .btn-pill {
    @apply rounded-full border border-border px-4 py-1.5 text-sm font-medium text-foreground transition hover:border-accent hover:text-accent;
  }

  .btn-pill-primary {
    @apply border-accent/50 text-accent hover:border-accent;
  }

  .nav-link {
    @apply rounded-full px-3 py-1.5 text-sm font-medium text-muted transition hover:text-foreground hover:bg-surface-muted/40;
  }

  .nav-link-active {
    @apply bg-surface-muted/70 text-foreground shadow-sm;
  }

  .nav-trigger {
    @apply flex items-center gap-2 rounded-full border border-border/80 bg-surface px-2.5 py-1 pl-1.5 pr-3 text-left text-sm font-medium text-foreground transition hover:border-accent hover:text-accent focus:outline-none focus:ring-2 focus:ring-outline focus:ring-offset-2 focus:ring-offset-background;
  }

  .dropdown-panel {
    @apply absolute right-0 z-30 mt-2 w-52 overflow-hidden rounded-2xl border border-border bg-background/95 shadow-2xl;
  }

  .dropdown-item {
    @apply flex items-center justify-between px-4 py-2 text-sm text-foreground transition hover:bg-surface-muted/60;
  }

  .dropdown-item-active {
    @apply text-accent;
  }

  .dock-nav {
    @apply flex h-full w-16 flex-col items-center gap-4 bg-background pt-6 pb-4;
  }

  .dock-trigger {
    @apply relative flex h-12 w-12 items-center justify-center rounded-2xl border border-transparent bg-surface text-subtle transition focus:outline-none focus:ring-2 focus:ring-outline focus:ring-offset-2 focus:ring-offset-background hover:bg-surface-muted hover:text-foreground;
  }

  .dock-trigger-active {
    @apply border border-border/70 bg-surface-muted text-foreground;
  }

  .dock-trigger-indicator {
    @apply absolute -bottom-2 h-1 w-8 rounded-full bg-border;
  }

  .panel-card {
    @apply rounded-2xl border border-border bg-surface/70;
  }

  .panel-section {
    @apply panel-card p-5;
  }

  .library-grid {
    @apply grid gap-4 items-start;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  }
}

@layer utilities {
  .scrollbar-hidden {
    scrollbar-width: none;
  }

  .scrollbar-hidden::-webkit-scrollbar {
    display: none;
  }
}

@media (min-width: 1024px) {
  .library-grid {
    grid-template-columns: repeat(var(--library-columns, 8), minmax(0, 1fr));
  }
}
